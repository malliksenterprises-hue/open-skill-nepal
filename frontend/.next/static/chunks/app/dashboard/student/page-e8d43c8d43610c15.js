(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{2652:function(e,s,t){Promise.resolve().then(t.bind(t,519))},519:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return StudentDashboard}});var l=t(7437),a=t(2265),d=t(420),n=t(8508),i=t(2601);function StudentDashboard(){let[e,s]=(0,a.useState)({}),[t,c]=(0,a.useState)(!0),[r,o]=(0,a.useState)(null),{user:x}=(0,n.useAuth)();(0,a.useEffect)(()=>{console.log("✅ STUDENT DASHBOARD - FIXED VERSION LOADED"),fetchStudentData()},[]);let fetchStudentData=async()=>{try{let e=localStorage.getItem("openSkillToken");console.log("\uD83D\uDD04 Fetching student data with token:",!!e);let t=await fetch("".concat(i.env.NEXT_PUBLIC_API_URL,"/api/dashboard/student"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("\uD83D\uDCCA API Response status:",t.status),t.ok){let e=await t.json();console.log("\uD83D\uDCE6 Received dashboard data:",e),s(e||{})}else throw Error("API Error: ".concat(t.status))}catch(e){console.error("❌ Error fetching student data:",e),o(e.message),s({})}finally{c(!1)}};Array.isArray(null==e?void 0:e.classes)&&e.classes;let h=Array.isArray(null==e?void 0:e.upcomingClasses)?e.upcomingClasses:[],m=Array.isArray(null==e?void 0:e.recentVideos)?e.recentVideos:[],u=(null==e?void 0:e.stats)||{};return t?(0,l.jsx)(d.Z,{children:(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})}):r?(0,l.jsx)(d.Z,{children:(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-red-500 text-xl mb-4",children:"⚠️"}),(0,l.jsx)("p",{className:"text-gray-600 mb-2",children:"Failed to load dashboard"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:r}),(0,l.jsx)("button",{onClick:fetchStudentData,className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Try Again"})]})})}):(0,l.jsx)(d.Z,{children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Welcome back, ",(null==x?void 0:x.name)||"Student","!"]}),(0,l.jsx)("p",{className:"text-gray-600",children:"Continue your learning journey with your scheduled classes and videos."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg mr-4",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCDA"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Classes"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.activeClasses||0})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-3 bg-green-100 rounded-lg mr-4",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFA5"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Videos Watched"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.videosWatched||0})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg mr-4",children:(0,l.jsx)("span",{className:"text-2xl",children:"⏰"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:h.length})]})]})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,l.jsx)("div",{className:"p-6 border-b",children:(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Upcoming Classes"})}),(0,l.jsx)("div",{className:"p-6",children:h.length>0?(0,l.jsx)("div",{className:"space-y-4",children:h.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"font-semibold text-lg",children:(null==e?void 0:e.title)||"Untitled Class"}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Subject: ",(null==e?void 0:e.subject)||"Not specified"]}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["Time: ",(null==e?void 0:e.scheduleTime)?new Date(e.scheduleTime).toLocaleString():"Not scheduled"]})]}),(0,l.jsx)("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded text-sm transition-colors",children:"Join Class"})]},(null==e?void 0:e._id)||"class-".concat(s)))}):(0,l.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No upcoming classes scheduled."})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,l.jsx)("div",{className:"p-6 border-b",children:(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Recent Videos"})}),(0,l.jsx)("div",{className:"p-6",children:m.length>0?(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map((e,s)=>{var t;return(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"bg-gray-100 h-40 flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-4xl",children:"\uD83C\uDFAC"})}),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h3",{className:"font-semibold mb-2",children:(null==e?void 0:e.title)||"Untitled Video"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:(null==e?void 0:null===(t=e.teacher)||void 0===t?void 0:t.name)||"Unknown Teacher"}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:(null==e?void 0:e.createdAt)?new Date(e.createdAt).toLocaleDateString():"Unknown date"}),(0,l.jsx)("button",{className:"w-full mt-3 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded text-sm transition-colors",children:"Watch Video"})]})]},(null==e?void 0:e._id)||"video-".concat(s))})}):(0,l.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No recent videos available."})})]})]})})}}},function(e){e.O(0,[420,971,472,744],function(){return e(e.s=2652)}),_N_E=e.O()}]);