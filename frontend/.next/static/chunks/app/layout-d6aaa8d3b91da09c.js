(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2601:function(e,t,o){"use strict";var r,n;e.exports=(null==(r=o.g.process)?void 0:r.env)&&"object"==typeof(null==(n=o.g.process)?void 0:n.env)?o.g.process:o(8960)},6787:function(e,t,o){Promise.resolve().then(o.t.bind(o,2853,23)),Promise.resolve().then(o.bind(o,8508))},8508:function(e,t,o){"use strict";o.r(t),o.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var r=o(7437),n=o(2265),u=o(2601);let i=u.env.NEXT_PUBLIC_API_URL?u.env.NEXT_PUBLIC_API_URL:"https://open-skill-nepal-669869115660.asia-south1.run.app/api";async function apiRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="".concat(i).concat(e);console.group("\uD83C\uDF10 API Request: ".concat(e)),console.log("Full URL:",o),console.log("Method:",t.method||"GET"),console.log("Payload:",t.body);let r={method:t.method||"GET",headers:{"Content-Type":"application/json",...t.headers},credentials:"include",signal:AbortSignal.timeout(3e4)};t.body&&"GET"!==r.method&&(r.body=JSON.stringify(t.body));try{let e=await fetch(o,r);console.log("Response Status:",e.status),console.log("Response Headers:",Object.fromEntries(e.headers.entries()));let t=await e.json();if(console.log("Response Data:",t),!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(t.message||"Request failed"));return console.groupEnd(),t}catch(e){if(console.groupEnd(),"AbortError"===e.name)throw Error("Request timeout: Server took too long to respond");if("TypeError"===e.name)throw Error("Network error: Cannot connect to server");throw e}}let l={login:async(e,t)=>{if(!e||!t)throw Error("Email and password are required");return apiRequest("/auth/login",{method:"POST",body:{email:e,password:t}})},googleLogin:e=>{if(!(null==e?void 0:e.email)||!(null==e?void 0:e.googleId))throw Error("Google authentication data is incomplete");return apiRequest("/auth/google-login",{method:"POST",body:e})},getMe:e=>{if(!e)throw Error("Authentication token is required");return apiRequest("/auth/me",{headers:{Authorization:"Bearer ".concat(e)}})},logout:e=>apiRequest("/auth/logout",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})},s=(0,n.createContext)();function AuthProvider(e){let{children:t}=e,[o,u]=(0,n.useState)(null),[i,a]=(0,n.useState)(!0),[c,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{checkAuth()},[]);let checkAuth=async()=>{try{let e=localStorage.getItem("openSkillToken");if(e){f(e);let t=await l.getMe(e);u(t)}}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("openSkillToken"),f(null),u(null)}finally{a(!1)}},login=async(e,t)=>{try{console.log("\uD83D\uDD04 AuthContext: Attempting login...");let o=await l.login(e,t);console.log("✅ AuthContext: Login response:",o);let{token:r,user:n}=o;return localStorage.setItem("openSkillToken",r),f(r),u(n),{success:!0,user:n}}catch(e){var o;return console.error("❌ AuthContext: Login error:",e),{success:!1,message:e.message||(null===(o=e.data)||void 0===o?void 0:o.message)||"Login failed"}}},googleLogin=async e=>{try{console.log("\uD83D\uDD04 AuthContext: Attempting Google login...");let t=await l.googleLogin(e);console.log("✅ AuthContext: Google login response:",t);let{token:o,user:r}=t;return localStorage.setItem("openSkillToken",o),f(o),u(r),{success:!0,user:r}}catch(e){var t;return console.error("❌ AuthContext: Google login error:",e),{success:!1,message:e.message||(null===(t=e.data)||void 0===t?void 0:t.message)||"Google login failed"}}},logout=async()=>{try{c&&await l.logout(c)}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("openSkillToken"),f(null),u(null)}};return(0,r.jsx)(s.Provider,{value:{user:o,token:c,loading:i,login,googleLogin,logout,isAuthenticated:!!o},children:t})}function useAuth(){let e=(0,n.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},2853:function(){},8960:function(e){!function(){var t={229:function(e){var t,o,r,n=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}function runClearTimeout(e){if(o===clearTimeout)return clearTimeout(e);if((o===defaultClearTimeout||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{o="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){o=defaultClearTimeout}}();var u=[],i=!1,l=-1;function cleanUpNextTick(){i&&r&&(i=!1,r.length?u=r.concat(u):l=-1,u.length&&drainQueue())}function drainQueue(){if(!i){var e=runTimeout(cleanUpNextTick);i=!0;for(var t=u.length;t;){for(r=u,u=[];++l<t;)r&&r[l].run();l=-1,t=u.length}r=null,i=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];u.push(new Item(e,t)),1!==u.length||i||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=noop,n.addListener=noop,n.once=noop,n.off=noop,n.removeListener=noop,n.removeAllListeners=noop,n.emit=noop,n.prependListener=noop,n.prependOnceListener=noop,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},o={};function __nccwpck_require__(e){var r=o[e];if(void 0!==r)return r.exports;var n=o[e]={exports:{}},u=!0;try{t[e](n,n.exports,__nccwpck_require__),u=!1}finally{u&&delete o[e]}return n.exports}__nccwpck_require__.ab="//";var r=__nccwpck_require__(229);e.exports=r}()},622:function(e,t,o){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=o(2265),n=Symbol.for("react.element"),u=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,o){var r,s={},a=null,c=null;for(r in void 0!==o&&(a=""+o),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(c=t.ref),t)u.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:n,type:e,key:a,ref:c,props:s,_owner:i.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,o){"use strict";e.exports=o(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=6787)}),_N_E=e.O()}]);