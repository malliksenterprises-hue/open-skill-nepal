(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[420],{2601:function(e,t,o){"use strict";var r,n;e.exports=(null==(r=o.g.process)?void 0:r.env)&&"object"==typeof(null==(n=o.g.process)?void 0:n.env)?o.g.process:o(8960)},420:function(e,t,o){"use strict";o.d(t,{Z:function(){return DashboardLayout}});var r=o(7437),n=o(2265),s=o(4033),a=o(8508);function DashboardLayout(e){var t,o;let{children:i}=e,[u,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)("dashboard"),{user:h,logout:m}=(0,a.useAuth)(),f=(0,s.useRouter)();if((0,n.useEffect)(()=>{h||f.push("/login")},[h,f]),!h)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-lg",children:"Loading..."})});let g=(()=>{let e=[{name:"Dashboard",href:"/dashboard/".concat(h.role),icon:"\uD83D\uDCCA",id:"dashboard"}];switch(h.role){case"super_admin":return[...e,{name:"Schools",href:"/dashboard/super-admin/schools",icon:"\uD83C\uDFEB",id:"schools"},{name:"Admins",href:"/dashboard/super-admin/admins",icon:"⚡",id:"admins"},{name:"System Stats",href:"/dashboard/super-admin/stats",icon:"\uD83D\uDCC8",id:"stats"}];case"admin":return[...e,{name:"Pending Schools",href:"/dashboard/admin/pending-schools",icon:"⏳",id:"pending-schools"},{name:"Teachers",href:"/dashboard/admin/teachers",icon:"\uD83D\uDC68‍\uD83C\uDFEB",id:"teachers"},{name:"School Assignments",href:"/dashboard/admin/assignments",icon:"\uD83C\uDFAF",id:"assignments"}];case"school_admin":return[...e,{name:"Student Verification",href:"/dashboard/school-admin/verification",icon:"✅",id:"verification"},{name:"Students",href:"/dashboard/school-admin/students",icon:"\uD83C\uDF93",id:"students"},{name:"Teachers",href:"/dashboard/school-admin/teachers",icon:"\uD83D\uDC68‍\uD83C\uDFEB",id:"teachers"},{name:"Class Schedule",href:"/dashboard/school-admin/schedule",icon:"\uD83D\uDCC5",id:"schedule"},{name:"Videos",href:"/dashboard/school-admin/videos",icon:"\uD83C\uDFA5",id:"videos"}];case"teacher":return[...e,{name:"Upload Video",href:"/dashboard/teacher/upload",icon:"\uD83D\uDCF9",id:"upload"},{name:"My Videos",href:"/dashboard/teacher/videos",icon:"\uD83C\uDFAC",id:"my-videos"},{name:"Schedule",href:"/dashboard/teacher/schedule",icon:"\uD83D\uDCC5",id:"schedule"},{name:"Analytics",href:"/dashboard/teacher/analytics",icon:"\uD83D\uDCC8",id:"analytics"}];case"student":return[...e,{name:"Live Classes",href:"/dashboard/student/live",icon:"\uD83D\uDD34",id:"live"},{name:"Upcoming",href:"/dashboard/student/upcoming",icon:"⏰",id:"upcoming"},{name:"Recorded",href:"/dashboard/student/recorded",icon:"\uD83D\uDCFC",id:"recorded"},{name:"My Progress",href:"/dashboard/student/progress",icon:"\uD83D\uDCCA",id:"progress"}];default:return e}})();return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,r.jsxs)("div",{className:"".concat(u?"block":"hidden"," md:block md:w-64 bg-gray-800"),children:[(0,r.jsx)("div",{className:"flex items-center justify-center h-16 bg-gray-900",children:(0,r.jsx)("h1",{className:"text-white text-lg font-semibold",children:"Open Skill Nepal"})}),(0,r.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Welcome,"}),(0,r.jsx)("p",{className:"text-white font-medium truncate",children:h.name}),(0,r.jsx)("p",{className:"text-gray-400 text-xs",children:{super_admin:"\uD83D\uDC51 Super Admin",admin:"⚡ Admin",school_admin:"\uD83C\uDFEB School Admin",teacher:"\uD83D\uDC68‍\uD83C\uDFEB Teacher",student:"\uD83C\uDF93 Student"}[o=h.role]||o}),"student"===h.role&&h.status&&(0,r.jsx)("span",{className:"inline-block mt-1 px-2 py-1 text-xs rounded-full ".concat("approved"===h.status?"bg-green-100 text-green-800":"pending"===h.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:h.status})]}),(0,r.jsx)("nav",{className:"mt-5 px-2 space-y-1",children:g.map(e=>(0,r.jsxs)("a",{href:e.href,onClick:t=>{t.preventDefault(),d(e.id),f.push(e.href)},className:"group flex items-center px-2 py-2 text-base font-medium rounded-md transition-colors ".concat(c===e.id?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:[(0,r.jsx)("span",{className:"mr-3 text-lg",children:e.icon}),e.name]},e.id))})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{onClick:()=>l(!u),className:"text-gray-500 hover:text-gray-600 focus:outline-none focus:text-gray-600 md:hidden",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,r.jsx)("h1",{className:"ml-4 text-xl font-semibold text-gray-800",children:(null===(t=g.find(e=>e.id===c))||void 0===t?void 0:t.name)||"Dashboard"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-sm text-gray-700 hidden md:block",children:h.email}),(0,r.jsx)("button",{onClick:()=>{m(),f.push("/login")},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm transition-colors",children:"Logout"})]})]})}),(0,r.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-4",children:i})]})]})}},8508:function(e,t,o){"use strict";o.r(t),o.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var r=o(7437),n=o(2265),s=o(2601);let a=s.env.NEXT_PUBLIC_API_URL?s.env.NEXT_PUBLIC_API_URL:"https://open-skill-nepal-669869115660.asia-south1.run.app/api";async function apiRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="".concat(a).concat(e);console.group("\uD83C\uDF10 API Request: ".concat(e)),console.log("Full URL:",o),console.log("Method:",t.method||"GET"),console.log("Payload:",t.body);let r={method:t.method||"GET",headers:{"Content-Type":"application/json",...t.headers},credentials:"include",signal:AbortSignal.timeout(3e4)};t.body&&"GET"!==r.method&&(r.body=JSON.stringify(t.body));try{let e=await fetch(o,r);console.log("Response Status:",e.status),console.log("Response Headers:",Object.fromEntries(e.headers.entries()));let t=await e.json();if(console.log("Response Data:",t),!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(t.message||"Request failed"));return console.groupEnd(),t}catch(e){if(console.groupEnd(),"AbortError"===e.name)throw Error("Request timeout: Server took too long to respond");if("TypeError"===e.name)throw Error("Network error: Cannot connect to server");throw e}}let i={login:async(e,t)=>{if(!e||!t)throw Error("Email and password are required");return apiRequest("/auth/login",{method:"POST",body:{email:e,password:t}})},googleLogin:e=>{if(!(null==e?void 0:e.email)||!(null==e?void 0:e.googleId))throw Error("Google authentication data is incomplete");return apiRequest("/auth/google-login",{method:"POST",body:e})},getMe:e=>{if(!e)throw Error("Authentication token is required");return apiRequest("/auth/me",{headers:{Authorization:"Bearer ".concat(e)}})},logout:e=>apiRequest("/auth/logout",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})},u=(0,n.createContext)();function AuthProvider(e){let{children:t}=e,[o,s]=(0,n.useState)(null),[a,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null);(0,n.useEffect)(()=>{checkAuth()},[]);let checkAuth=async()=>{try{let e=localStorage.getItem("openSkillToken");if(e){d(e);let t=await i.getMe(e);s(t)}}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("openSkillToken"),d(null),s(null)}finally{l(!1)}},login=async(e,t)=>{try{console.log("\uD83D\uDD04 AuthContext: Attempting login...");let o=await i.login(e,t);console.log("✅ AuthContext: Login response:",o);let{token:r,user:n}=o;return localStorage.setItem("openSkillToken",r),d(r),s(n),{success:!0,user:n}}catch(e){var o;return console.error("❌ AuthContext: Login error:",e),{success:!1,message:e.message||(null===(o=e.data)||void 0===o?void 0:o.message)||"Login failed"}}},googleLogin=async e=>{try{console.log("\uD83D\uDD04 AuthContext: Attempting Google login...");let t=await i.googleLogin(e);console.log("✅ AuthContext: Google login response:",t);let{token:o,user:r}=t;return localStorage.setItem("openSkillToken",o),d(o),s(r),{success:!0,user:r}}catch(e){var t;return console.error("❌ AuthContext: Google login error:",e),{success:!1,message:e.message||(null===(t=e.data)||void 0===t?void 0:t.message)||"Google login failed"}}},logout=async()=>{try{c&&await i.logout(c)}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("openSkillToken"),d(null),s(null)}};return(0,r.jsx)(u.Provider,{value:{user:o,token:c,loading:a,login,googleLogin,logout,isAuthenticated:!!o},children:t})}function useAuth(){let e=(0,n.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},8960:function(e){!function(){var t={229:function(e){var t,o,r,n=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}function runClearTimeout(e){if(o===clearTimeout)return clearTimeout(e);if((o===defaultClearTimeout||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{o="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){o=defaultClearTimeout}}();var s=[],a=!1,i=-1;function cleanUpNextTick(){a&&r&&(a=!1,r.length?s=r.concat(s):i=-1,s.length&&drainQueue())}function drainQueue(){if(!a){var e=runTimeout(cleanUpNextTick);a=!0;for(var t=s.length;t;){for(r=s,s=[];++i<t;)r&&r[i].run();i=-1,t=s.length}r=null,a=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];s.push(new Item(e,t)),1!==s.length||a||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=noop,n.addListener=noop,n.once=noop,n.off=noop,n.removeListener=noop,n.removeAllListeners=noop,n.emit=noop,n.prependListener=noop,n.prependOnceListener=noop,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},o={};function __nccwpck_require__(e){var r=o[e];if(void 0!==r)return r.exports;var n=o[e]={exports:{}},s=!0;try{t[e](n,n.exports,__nccwpck_require__),s=!1}finally{s&&delete o[e]}return n.exports}__nccwpck_require__.ab="//";var r=__nccwpck_require__(229);e.exports=r}()},622:function(e,t,o){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=o(2265),n=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,o){var r,u={},l=null,c=null;for(r in void 0!==o&&(l=""+o),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!i.hasOwnProperty(r)&&(u[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===u[r]&&(u[r]=t[r]);return{$$typeof:n,type:e,key:l,ref:c,props:u,_owner:a.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,o){"use strict";e.exports=o(622)},4033:function(e,t,o){e.exports=o(94)}}]);