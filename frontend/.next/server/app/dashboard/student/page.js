(()=>{var e={};e.id=665,e.ids=[665],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},3776:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var a=t(7096),r=t(6132),l=t(7284),n=t.n(l),d=t(2564),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);t.d(s,i);let c=["",{children:["dashboard",{children:["student",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6817)),"/workspaces/open-skill-nepal/frontend/app/dashboard/student/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,505)),"/workspaces/open-skill-nepal/frontend/app/dashboard/layout.js"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9501)),"/workspaces/open-skill-nepal/frontend/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/workspaces/open-skill-nepal/frontend/app/dashboard/student/page.js"],x="/dashboard/student/page",h={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/student/page",pathname:"/dashboard/student",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8035:(e,s,t)=>{Promise.resolve().then(t.bind(t,9708))},9708:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>StudentDashboard});var a=t(784),r=t(9885),l=t(9902),n=t(9960);function StudentDashboard(){let[e,s]=(0,r.useState)({}),[t,d]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null),{user:o}=(0,n.useAuth)();(0,r.useEffect)(()=>{console.log("✅ STUDENT DASHBOARD - FIXED VERSION LOADED"),fetchStudentData()},[]);let fetchStudentData=async()=>{try{let e=localStorage.getItem("openSkillToken");console.log("\uD83D\uDD04 Fetching student data with token:",!!e);let t=await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/dashboard/student`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(console.log("\uD83D\uDCCA API Response status:",t.status),t.ok){let e=await t.json();console.log("\uD83D\uDCE6 Received dashboard data:",e),s(e||{})}else throw Error(`API Error: ${t.status}`)}catch(e){console.error("❌ Error fetching student data:",e),c(e.message),s({})}finally{d(!1)}};Array.isArray(e?.classes)&&e.classes;let x=Array.isArray(e?.upcomingClasses)?e.upcomingClasses:[],h=Array.isArray(e?.recentVideos)?e.recentVideos:[],m=e?.stats||{};return t?a.jsx(l.Z,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})}):i?a.jsx(l.Z,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-500 text-xl mb-4",children:"⚠️"}),a.jsx("p",{className:"text-gray-600 mb-2",children:"Failed to load dashboard"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:i}),a.jsx("button",{onClick:fetchStudentData,className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Try Again"})]})})}):a.jsx(l.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Welcome back, ",o?.name||"Student","!"]}),a.jsx("p",{className:"text-gray-600",children:"Continue your learning journey with your scheduled classes and videos."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-lg mr-4",children:a.jsx("span",{className:"text-2xl",children:"\uD83D\uDCDA"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Classes"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.activeClasses||0})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-green-100 rounded-lg mr-4",children:a.jsx("span",{className:"text-2xl",children:"\uD83C\uDFA5"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Videos Watched"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.videosWatched||0})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-purple-100 rounded-lg mr-4",children:a.jsx("span",{className:"text-2xl",children:"⏰"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.length})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Upcoming Classes"})}),a.jsx("div",{className:"p-6",children:x.length>0?a.jsx("div",{className:"space-y-4",children:x.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:e?.title||"Untitled Class"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Subject: ",e?.subject||"Not specified"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Time: ",e?.scheduleTime?new Date(e.scheduleTime).toLocaleString():"Not scheduled"]})]}),a.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded text-sm transition-colors",children:"Join Class"})]},e?._id||`class-${s}`))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming classes scheduled."})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Recent Videos"})}),a.jsx("div",{className:"p-6",children:h.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-100 h-40 flex items-center justify-center",children:a.jsx("span",{className:"text-4xl",children:"\uD83C\uDFAC"})}),(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:e?.title||"Untitled Video"}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e?.teacher?.name||"Unknown Teacher"}),a.jsx("p",{className:"text-xs text-gray-500",children:e?.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown date"}),a.jsx("button",{className:"w-full mt-3 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded text-sm transition-colors",children:"Watch Video"})]})]},e?._id||`video-${s}`))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent videos available."})})]})]})})}},6817:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var a=t(5153);let r=(0,a.createProxy)(String.raw`/workspaces/open-skill-nepal/frontend/app/dashboard/student/page.js`),{__esModule:l,$$typeof:n}=r,d=r.default,i=d}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[611,294,172],()=>__webpack_exec__(3776));module.exports=t})();